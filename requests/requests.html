<link rel="stylesheet" href="./requests/requests.css">
<div class="container">
	<div class="row text-center">
		<h1>Requests</h1>
	</div>
	<div>
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#borrowRequests" target="_self" role="tab" data-toggle="tab">My Requests</a></li>
    <li role="presentation"><a href="#lendRequests" target="_self" role="tab" data-toggle="tab">Requests for Me</a></li>
    <li role="presentation"><a href="#borrowing" target="_self" role="tab" data-toggle="tab">Borrowing</a></li>
    <li role="presentation"><a href="#lending" target="_self" role="tab" data-toggle="tab">Lending</a></li>
  </ul>

  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="borrowRequests">
    	<div class="row">
    		<div class="col-md-10 col-md-offset-1">
    			<div class="well text-center" data-ng-show="vm.borrowRequests.length == 0">
    				<h2>Nothing Here :(</h2>
    				<h4>Go borrow some items!</h4>
    			</div>
    		
		    	<div class="list-group">
					<div class="list-group-item"
						data-ng-repeat="request in vm.borrowRequests"
						data-ng-click="vm.goToItemPage(request.ItemId)">
							<div class="row">
								<div class="col-md-2">
									<img class="img img-responsive img-thumbnail item-image" data-ng-src="{{request.itemImage}}" />
								</div>
								<div class="col-md-10">
									<div class="row">
										<div class="col-md-8">
											<h4>{{request.itemTitle}}</h4>
										</div>
										<div class="col-md-4">
											<h4 class="pull-right"><small data-ng-class="request.itemAvailable ? 'text-success' : 'text-danger'">{{request.itemAvailable ? 'Available' : 'Unavailable'}} </small>
												<small>|</small>
												<small data-ng-class="request.requestApproved ? 'text-success' : 'text-warning' ">
													Request {{request.requestApproved ? 'Approved' : 'Pending'}}
												</small>
											</h4>
											<button class="btn btn-success btn-sm pull-right" data-ng-show="request.itemAvailable && request.requestApproved" data-ng-click="vm.markReceived(request, $event)">Item Received</button>
										</div>
									</div>
									
									<div class="row">
										<div class="col-md-4 text-center">
											<p class="pull-left">Owner:<button class="btn-small btn-link" data-ng-click="vm.goToUserPage(request.ownerUser, $event)">{{request.ownerUser}}</button></p>
										</div>
										<div class="col-md-4 text-center">
											<p data-ng-show="request.requestApproved">Contact Info: <small>{{request.ownerEmail}}</small></p>
										</div>
										<div class="col-md-4 text-center">
										</div>
									</div>
								</div>
							</div>	
								
					</div>
				</div>
			</div>
		</div>
    </div>
    
    <div role="tabpanel" class="tab-pane" id="lendRequests">
    	<div class="row">
    		<div class="col-md-10 col-md-offset-1">
	    		<div class="well text-center" data-ng-show="vm.lendRequests.length == 0">
	    			<h2>Nothing Here :(</h2>
	    			<h4>Nobody wants your garbage!</h4>
	    		</div>
		    	<div class="list-group">
					<div class="list-group-item"
						data-ng-repeat="request in vm.lendRequests"
						data-ng-click="vm.goToItemPage(request.ItemId)">
							<div class="row">
								<div class="col-md-2">
									<img class="img img-responsive img-thumbnail item-image" data-ng-src="{{request.itemImage}}" />
								</div>
								<div class="col-md-10">
									<div class="row">
										<div class="col-md-8">
											<h4>{{request.itemTitle}} <small data-ng-class="request.itemAvailable ? 'text-success' : 'text-danger'">{{request.itemAvailable ? 'Available' : 'Unavailable'}}</small></h4>
										</div>
										<div class="col-md-4">
											<button class="pull-right btn btn-sm" data-ng-click="vm.approve(request, $event)" data-ng-class="request.requestApproved ? 'btn-readonly' : 'btn-success' " title="Approve the request and exchange contact info with the requester!">
												{{request.requestApproved ? 'Accepted' : 'Accept'}} <i class="fa fa-check text-success" data-ng-show="request.requestApproved"></i>
											</button>
										</div>
									</div>
									
									<div class="row">
										<div class="col-md-4">
											<p> Requested By: <button class="btn-link" data-ng-click="vm.goToUserPage(request.requester, $event)">{{request.requester}}</button></p>
										</div>
										<div class="col-md-4">
											<p class="" data-ng-show="request.requestApproved">Contact Info: <small>{{request.requesterEmail}}</small></p>
										</div>
										<div class="col-md-4">
											
										</div>
									</div>
								</div>
							</div>	
								
					</div>
				</div>
			</div>
		</div>
    </div>
    
    <div role="tabpanel" class="tab-pane" id="borrowing">
    	<div class="row">
    		<div class="col-md-10 col-md-offset-1">
    			<div class="well text-center" data-ng-show="vm.currentlyBorrowedItems.length == 0">
	    			<h2>Nothing Here :(</h2>
	    			<h4>You're not borrowing anything!</h4>
	    		</div>
		    	<div class="list-group">
					<div class="list-group-item"
						data-ng-repeat="request in vm.currentlyBorrowedItems"
						data-ng-click="vm.goToItemPage(request.ItemId)">
							<div class="row">
								<div class="col-md-2">
									<img class="img img-responsive img-thumbnail item-image" data-ng-src="{{request.itemImage}}" />
								</div>
								<div class="col-md-10">
									<div class="row">
										<div class="col-md-8">
											<h4>{{request.itemTitle}} <small class="text-info">{{vm.getDeltaTime(request.borrowStartTime) | millSecondsToTimeString }}</small></h4>
										</div>
										<div class="col-md-4">
										</div>
									</div>
									
									<div class="row">
										<div class="col-md-4">
											<p> Owned By: <button class="btn-link" data-ng-click="vm.goToUserPage(request.ownerUser, $event)">{{request.ownerUser}}</button></p>
										</div>
										<div class="col-md-4">
											<p class="">Contact Info: <small>{{request.ownerEmail}}</small></p>
										</div>
										<div class="col-md-4">
											
										</div>
									</div>
								</div>
							</div>	
								
					</div>
				</div>
			</div>
		</div>
    </div>
    
    <div role="tabpanel" class="tab-pane" id="lending">
    	<div class="row">
    		<div class="col-md-10 col-md-offset-1">
    			<div class="well text-center" data-ng-show="vm.currentlyLentItems.length == 0">
	    			<h2>Nothing Here :(</h2>
	    			<h4>Nobody's borrowing anything from you!</h4>
	    		</div>
		    	<div class="list-group">
					<div class="list-group-item"
						data-ng-repeat="request in vm.currentlyLentItems"
						data-ng-click="vm.goToItemPage(request.ItemId)">
							<div class="row">
								<div class="col-md-2">
									<img class="img img-responsive img-thumbnail item-image" data-ng-src="{{request.itemImage}}" />
								</div>
								<div class="col-md-10">
									<div class="row">
										<div class="col-md-8">
											<h4>{{request.itemTitle}} <small class="text-info">{{vm.getDeltaTime(request.borrowStartTime) | millSecondsToTimeString }}</small></h4>
										</div>
										<div class="col-md-4">
											<button class="pull-right btn btn-success btn-sm" data-ng-click="vm.markReturned(request, $event)" title="Click this when the item is returned.">Item Returned</button>
										</div>
									</div>
									
									<div class="row">
										<div class="col-md-4">
											<p> Borrowed By: <button class="btn-link" data-ng-click="vm.goToUserPage(request.requester, $event)">{{request.requester}}</button></p>
										</div>
										<div class="col-md-4">
											<p class="">Contact Info: <small>{{request.requesterEmail}}</small></p>
										</div>
										<div class="col-md-4">
											
										</div>
									</div>
								</div>
							</div>	
								
					</div>
				</div>
			</div>
		</div>
    </div>
  </div>

</div>
</div>